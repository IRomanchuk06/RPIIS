# Лабораторная работа по дисциплине ПиОИвИС №1
**В рамках 1-ой лабораторной работы необходимо создать исполняемый файл в соответствии с заданным вариантом.**
# Условие задания (вариант 92)s
Создать файл sh и bat, который выполняет следующее:
на вход пакетному файлу приходит относительный путь к папке (как параметр пакетного файла). Если такой папки нет, то писать “Данной папки нет” и завершить выполнение программы. Если такая папка есть, то в ней и ее подкаталогах найти файлы, размер которых больше 1Mb. Перенести все эти файлы в новосозданную папку files (должна быть создана в папке, заданной как параметр пакетного файла)

# Выполнение задания
## Алгоритм программы
1. запрашиваем у пользователя путь к каталогу;
2. проверяем каталог на существованиe:
   - если каталога не существует, сообщать о его отсутствии и завершать программу;
3. проверяем подкаталог с названием "files" на существование:
   - если подкаталога не существует, создаём его;
4. инициируем цикл, рекурсивно проходящийся по папке и её подпапках, с целью найти файлы, размер которых превышает 1 мегабайт;
5. перемещаем найденные подходящие файлы в подкаталог "files", созданный ранее.

## **Код исполняемого bat-файла**
```bat
@echo off
set /p input="Введите путь к папке: "

if not exist "%input%" (
	echo такой папки нет
	timeout 3
	exit
)

if not exist "%input%\files" mkdir "%input%\files"

for /r "%input%" %%f in (*) do (
	if %%~zf GTR 1048576 (
	move "%%f" "%input%/files"
	echo перемещён файл "%%f"
	)
)
pause
```
#### Описание кода
1. *set /p input="Введите путь к папке: "* – запрашиваем путь к папке, где "/p" задает значение переменной строкой ввода;
2. *if not exist "%input%"* – проверка папки на существование с помощью оператора условия ("%input%", собственно, и есть строка с путём);
3. *if not exist "%input%\files" mkdir "%input%\files"* – аналогичная проверка на существование, но уже подкаталога (в строке сначала содержится путь, заданный пользователем, а потом уже название подкаталога), в ином случае создаем эту самую папку командой "mkdir";
4. *for /r "%input%" %%f in* (*) *do* *(*
   - *for /r* – вызываем цикл (/r – рекурсивный: проходит по дереву каталогов);
   - *"%input%"* – корень каталога;
   - *%%f* – переменная, которая принимает значения каждого найденного файла;
   - *in* (*) – перебираем абсолютно все файлы вне зависимости от расширения и пр.;
   - *do ()* – выполнение команды для найденных файлов;
5. *if %%~zf GTR 1048576 (*
   - *if %%~zf* – всё та же переменная, но уже с модификатором "~z", который возвращает размер файла;
   - *GTR 1048576*  – "greater than": сравниваем размер файла с мегабайтом, и, в случае успеха, переходим дальше;
6. *move "%%f" "%input%/files"* – перемещаем файл, проверенный на размер ранее, в целевую директорию, созданную в самом начале.

#### Пример запуска программы
![image](https://github.com/iis-32170x/RPIIS/assets/66639629/0a5ebe72-e009-487b-b9f3-11e41e8b88d0)
![image](https://github.com/iis-32170x/RPIIS/assets/66639629/1695bc14-21a6-4df4-a204-05aa0c11df38)

## **Код исполняемого bash-файла**
```shell
read -p "Введите путь к папке: " path

if [ ! -d "$path" ]; then  
    echo "папки не существует" 
	exit
fi

if [ ! -d "$path/files" ]; then
	mkdir $path/files
fi

find "$path" -type f -size +1M | while read file; do
	echo $file
	cp "$file" "$path/files"
done
```
#### Описание кода
1. *read -p "Введите путь к папке: " path* – запрашиваем путь к папке и сохраняем его в переменную "path", "-p" дополнительно выводит текст;
2. *if [ ! -d "$path" ]; then*
   - *!* – логический оператор "НЕ";
   - *-d* – аргумент, проверяющий папку на существование;
   - *"$path"* – переменная с путём к папке;
3. *if [ ! -d "$path/files" ]; then*
	 *mkdir $path/files* – аналогичная проверка на существование, но уже подкаталога (в строке сначала содержится путь, заданный пользователем, а потом уже название подкаталога), в ином случае создаем эту самую папку командой "mkdir";
4. *find "$path" -type f -size +1M | while read file; do*
   - *find "$path"* – команда для поиска файлов в директории и поддиректориях;
   - *-type f* – условие, которое указывает искать только файлы;
   - *-size +1M* – условие, которое указывать искать файлы, размер которых превышает 1 мегабайт;
   - *| while read file; do* – цикл, который читает каждую строку из ввода и сохраняет в переменную "file";
5. *mv "$file" "$path/files"* – перемещаем файл в созданную поддиректорию.


## Пример запуска программы
![image](https://github.com/iis-32170x/RPIIS/assets/66639629/f7afef39-09ef-4bf8-b340-9d390b4fcb93)
![image](https://github.com/iis-32170x/RPIIS/assets/66639629/3ad58f7a-75f2-4402-8d49-3957fd79483e)



