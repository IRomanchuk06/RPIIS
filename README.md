# ПОИИС
Репозиторий дисциплины Представление и обработка информации в интеллектуальных системах 
(Representation and processing of information in intelligent systems) для групп потока 32170х.
С условиями лабораторных работ можно ознакомиться в папке соответствующего семестра.
# Условие лабораторной работы №1:
Создать исполняемый файл в соответствии с заданным вариантом
# Вариант 46
Создать файл sh и bat, который выполняет следующее: 
На вход пакетному файлу приходит относительный путь к файлу (как параметр пакетного файла) , содержащему через пробел ключевые слова, относительный путь к папке с текстовыми файлами, и некоторое число. Необходимо создать подпапку в указанной папке с именем, полученным добавлением строки “_search” к имени исходной папки и скопировать туда все файлы из исходной папки, в которых число найденных ключевых слов больше или равно заданному числу.

# .BAT:

## Исходные данные
Для выполнение задания у нас должны быть:
* Файл, из которого данные отправляются на основной файл с программой (dannye.bat)
  
![image](https://github.com/iis-32170x/RPIIS/assets/144937887/86381a80-f1e7-46e2-b516-0bdbff69ea43)

* Файл с программой (labapivas.bat)
![image](https://github.com/iis-32170x/RPIIS/assets/144937887/a9b59d99-e6a3-4f59-92c3-6fe04afc676f)
* Текстовые файлы, которые содержаь некоторый текст. Один из файлов не содержит ключевых слов, другой - содержит, но не в нужном для копирования количестве, оставшийся - содержит необходимое количество ключевых слов (fail1, fail2, fail3)
## Переменные
* target_folder — название папки с текстовыми файлами, в которой происходит процесс работы программы.
* keywords — ключевые слова
* search_folder_name — подпапка, создаваемая с именем основной папки с добавлением в конце "_search"
* search_number — минимальное количество ключевых слов, находящиеся в файле, для копирования файла в подпапку
* number — счетчик для подсчета ключевых слов в файле
## Алгоритм с параллельным описанием команд
* Команда @echo off используется для того, чтобы в консоли выводились только необходимые нам разультаты. Префикс @ распространяет echo off на всю программу
* setlocal enabledelayedexpansion ограничевает изменение в файлах Windows только в рамках используемого пакетного файла
1) Задаем переменные основной папки, ключевых слов и минимального нужного количества ключевых слов в файле с помощью команды set и обращению к переданным данным из файла dannye.bat с помощью %[номер переменной]
2) Изменяем домашнюю директорию на основную папку командой CD\%target_folder%
3) Задаем переменную подпаки, называя ее именем основной папки с добавлением "_search" в конце
   set search_folder_name=%target_folder%_search
4) Создание папки
* Если подпапки %search_folder_name% не существует:
>* Создаем папку с именем [имя основной папки]_search командой mkdir %search_folder_name%
* Если подпапка существует:
>* Не создаем её
## Основная часть алгоритма (проверка и копирование файлов)
Примечание: для удобной ориентации с помощью нумерации пунков алгоритма будет происходить навигация по циклам
1) Цикл обращения к файлам папки (for %%f in (*) do (...)
* %%f — переменнная, в которую входят все файлы. Она используется для поочередного обращения к этим файлам
* in (*) — часть цикла for, которая отвечает за область работы цикла. В данном случае *
определяет область в качестве домашней директории (т.е. проверяться будут только файлы в основной папке)
>* Обращаемся к файлу из основной папки
2) Цикл для нахождения строк с ключевыми словами (for /f "tokens=*" %%A in ('findstr /i "%keywords%" "%%f"') do (...)
* /f — опция, которая указывает, что вы хотите выполнить цикл для каждой строки, полученной из команды в кавычках
* "tokens=*" — токен, который указывает, что все символы в каждой строке будут сохранены в переменной %%A
* %%A - это имя переменной, в которой будет храниться каждая строка
* 
in ('findstr /i "%keywords%" "%%f"')
 — область для определения откуда брать строки для цикла
* 
findstr
 — команда для поиска ключевых слов в файле
>* Обращаемся к найденым ключевым словам в файле
3) Цикл для подсчета ключевых слов в файле (
for %%W in (%%A) do (...
)
* 
%%W
 — переменная, в которую входят слова строки. В данном случае она нужна для подсчета ключевых слов в файле
>* Обращаемся к ключевым словам, найденым в файле
>* Увеличиваем счетчик количества ключевых слов 
number
 в файле на 1 за каждое найденое ключевое слово
>* Цикл завершается
* (2)
>* Выводится сообщение найденом количестве слов в файле (
echo In %%f was found !number! keywords
)
>* Оператором if выполняется (
if !number! geq %search_number% (...
):
* >* Если количество ключевых слов в файле равно или больше минимального количества для копирования,то:
  * >* Выводится сообщение о копировании файла (
echo %%f was copied
)
    >* Файл копируется в подпапку (
copy %%f %search_folder_name%
)
>* Счетчик обнуляется (
set number=0
)
>* Цикл завершается
* (1)
>* Цикл завершается
* 
pause
 - команда, которая не закрывает окно консоли после выполнения алгоритма
* 
endlocal
 — окончание действие команды 
setlocal enabledelayedexpansion
# Пример работы программы
*  Папка с файлами:
*  ![image](https://github.com/iis-32170x/RPIIS/assets/144937887/2fcd2d10-d9cb-48c4-8907-d96af261e5bb)
* Запускаем командную строку
* ![image](https://github.com/iis-32170x/RPIIS/assets/144937887/7ce72f93-79e7-4e30-9470-1e05fbc1db0e)
* Задаем новую домашнюю директорию со сменой диска
* ![image](https://github.com/iis-32170x/RPIIS/assets/144937887/f63d9fb8-cebe-44b5-9479-7cc88cd1a6bf)
* Запускаем файл с программой (```start dannye.bat```)
* ![image](https://github.com/iis-32170x/RPIIS/assets/144937887/ab7bbcb5-25ca-414c-83f3-99d25f471f4b)
* Как видим, создалась подпапка со скопированными файлами:
* ![image](https://github.com/iis-32170x/RPIIS/assets/144937887/79ea820b-0dfd-4d72-9dc8-75115656ee84)
* Скопированные файлы:
* ![image](https://github.com/iis-32170x/RPIIS/assets/144937887/5bfe5d5b-6e16-41c9-a4dd-00c73178112b)
# .SH:
## Исходные данные
* Папка с текстовыми файлами:
* ![image](https://github.com/iis-32170x/RPIIS/assets/144937887/c61f064e-9e24-4009-a432-95b20cddd877)
* Файл с программой:
* ![image](https://github.com/iis-32170x/RPIIS/assets/144937887/0f06de49-e5ce-4985-a348-54e66af7be2c)
* Файл, из которого данные отправляются на основной файл с программой:
* ![image](https://github.com/iis-32170x/RPIIS/assets/144937887/93071cf6-195e-48c8-910e-158d7d9f1d3d)
## Переменные 
* keywords — ключевые слова
* search_folder_name — подпапка, создаваемая с именем основной папки с добавлением в конце "_search"
* search_number — минимальное количество ключевых слов, находящиеся в файле, для копирования файла в подпапку
* number — счетчик для подсчета ключевых слов в файле
## Алгоритм с параллельным описанием команд
* ```#!/bin/bash``` — настройка файла, из за которой система производит работу файла в Bash
* Объявляем переменные имени папки, списка ключевых слов, минимального количества ключевых слов в файле для копирования, счетчика для подсчета количества найденых ключевых слов в файле
* Объявляем переменную имени подпапки (```papka2=${folder}_search```)
* Создаем эту папку (```mkdir ./$folder/$papka2```)
> ```mkdir``` — команда для создания папки
## Основная часть алгоритма (проверка и копирование файлов)
```
for file in $folder/*; do
if [ -f $file ]; then
for keyword in $keywords; do
if grep -o -i -w -q "$keyword" $file; then
count=$((count + 1))
fi
done
if [ $count -ge $number ]; then
cp $file $folder/$papka2
fi
count=0
fi
done
```
* ```for file in $folder/*; do...``` — цикл для обращения к файлам в основной папке
> ```$file``` — переменная файлов в основной папке
> ```in $folder/*``` — означает, что проверка будет проводиться в рамках основной папки
> ```done``` — завершает работу цикла
* ```if [ -f $file ]; then...``` — проверка на то, является проверяющий элемент файлом
> ```fi``` — завершает работу оператора 
* ```for keyword in $keywords; do...``` — цикл для обращение к одному из ключевых слов
> ```$keyword``` — переменная для ключевого слова
* ```if grep -o -i -w -q "$keyword" $file; then...``` — поиск ключевого слова в файле
> ```grep``` — команда для поиска слов
>> Список опций команды ```grep```:
>> * ```-o``` используется для вывода только совпадений (совпадающих строк) вместо полных строк, в которых совпадение найдено.
>> * ```-i``` — опция для игнорирования регистра
>> * ```-q``` — опция "тихого поиска", т.е. найденые совпадения не выводятся
>> * ```-w``` — опция для поиска полного соответствия с поисковым словом
* ```count=$((count + 1))``` — при нахождении ключевого слова в файле счетчик увеличивается на 1
* ```if [ $count -ge $number ]; then...``` — условие для копирование файла
* ```cp $file $folder/$papka2``` — копирование файлов с необходимым количеством ключевых слов
* ```count=0``` — обнуление счетчика
## Пример запуска программы
* Запуск терминала
* ![image](https://github.com/iis-32170x/RPIIS/assets/144937887/e3253387-7491-4a09-8853-0cec39d512bf)
* Обращение к папке с программой (```cd [папка]```)
* ![image](https://github.com/iis-32170x/RPIIS/assets/144937887/da486a45-063f-4c33-8a3c-61cfcfe339ab)
* Настройка прав использования файлов с программой (```chmod +x [файл]```)
* ![image](https://github.com/iis-32170x/RPIIS/assets/144937887/e33d170a-2062-4681-9b3b-158a1a4adcc9)
* Запуск программы (./[файл])
* ![image](https://github.com/iis-32170x/RPIIS/assets/144937887/298da6d0-cc05-49d2-b1d7-c7e860525e4a)
* Создана подпапка
* ![image](https://github.com/iis-32170x/RPIIS/assets/144937887/1bd00a2d-1861-4684-b0f5-5e4564e64ae6)
* Скопированный файл
* ![image](https://github.com/iis-32170x/RPIIS/assets/144937887/c7ebaf4a-cb7f-4152-abae-c4237c0b32a1)







 









