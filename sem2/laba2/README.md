# Лабораторная работа по дисциплине ПиОИвИС №2, второй семестр

## Цель работы

Исследовать свойства структуры данных “множество” и разработать библиотеку для выполнения операции над множеством

## Индивидуальное задание №15
Реализовать программу, формирующую множество равное симметрической разности произвольного количества исходных множеств (без учёта кратных вхождений элементов).
## Ключевые понятия

***Множество*** — любая определенная совокупность объектов.

***Симметрическая разность*** — Множество C называется симметрической разностью множеств A и B, если C состоит из тех элементов и только тех элементов универсального множества U, которые принадлежат множеству A и не принадлежат множеству B или принадлежат множеству B и не принадлежат множеству A.

---

## Выполнение задания
В случае с симметрической разностью довольно сложно экстраполировать имеющиеся для её нахождения навыки более чем для двух множеств, благо существует контейнер `set` из стандартной библиотеки C++, в котором сабж реализован и нам не придётся изобретать велосипед. Ко всему прочему этот контейнер обладает весьма полезной особенностью: он не учитывает кратные вхождения элемента.

```cpp
set<int> symmetric_difference(const string& file_path) {
    ifstream file(file_path);
    if (!file.is_open()) {
        cout << "Ошибка при открытии файла.";
        exit(-1);
    }
    vector<set<int>> sets;
    sets.emplace_back();
    string number;
    char ch;
    while (file.get(ch)) {
        if (isdigit(ch)) {
            number += ch;
        } else if (ch == ' ' || ch == ',' || ch == '\n') {
            if (!number.empty()) {
                sets.back().insert(stoi(number));
                number.clear();
            }
            if (ch == '\n') {
                sets.emplace_back();
            }
        } else {
            cout << "Ошибка при чтении файла: недопустимый символ." << endl;
            exit(-1); 
        }
    }

    if (!number.empty()) {
        sets.back().insert(stoi(number));
    }

    set<int> result = sets[0];
    for (int i = 1; i < sets.size(); i++) {
        set<int> temp;
        set_symmetric_difference(result.begin(), result.end(),
                                sets[i].begin(), sets[i].end(),
                                inserter(temp, temp.begin()));
        result = temp;
    }
    file.close();
    return result;
}
```
На вход подаётся путь к файлу, содержащим множества в виде чисел, разделенных пробелами или запятыми, а множества расположены на отдельных строках. Посимвольно читаем файл, инициализируем вектор множеств, временную строку, дальше три выхода:

1. Если символ —  число -> закидываем его во временную строку

2. Если символ — пробел, запятая или символ переноса строки -> значит мы достигли конца числа, поэтому через `stoi` конвертируем строку в число и закидываем во множество.

    2.1. Если был символ переноса строки -> значит достигли конца строки и по совместительству конец множества, поэтому добавляем новое множество в вектор.

3. Если символ не является ничем из вышеперечисленного, значит в файле присутствует то, чего нам не надо -> выводим сообщением об ошибке и завершаем программу.

После конца цикла `while` в строке должно остаться последнее число, поэтому по аналогии конвертируем его в число и закидываем во множество.

```cpp
set_symmetric_difference(result.begin(), result.end(),
                                sets[i].begin(), sets[i].end(),
                                inserter(temp, temp.begin()));
```
С помощью функции `set_symmetric_difference` находим то, что нам надо:
`result.begin(), result.end()` — первый диапазон, итераторы указывают на начало и конец множества `result` и по совместительству на первое множество из вектора
`sets[i].begin(), sets[i].end()` — второй диапазон
`inserter(temp, temp.begin())` — помещаем результат симметрической разности двух вышеупомянутых диапазонов во временное множество.

В конце концов присваиваем временное множество конечному и повторяем до тех пор, пока не закончатся множества из вектора. Получили множество, равное симметрической разности заданных множеств.

---

## Тестирование

Входные данные:

```
1 2 3 4 5
2 5 4 7 9 0
7 1 3 4 5
5 2 9 6
0 1 9 8
```

Выходные данные:
```
1 2 4 6 8 9
```
Остальные тестовые программы расположены в директории `/tests`.

---

## Вывод
Реализовал библиотеку для нахождения симметрической разности множеств.

---

## Источники
1. https://www.youtube.com/watch?v=dQw4w9WgXcQ
2. https://stackoverflow.com/questions/13448064/how-to-find-the-intersection-of-two-stl-sets
3. https://www.geeksforgeeks.org/stdset_symmetric_difference-in-c/