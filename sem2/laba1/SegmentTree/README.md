# Лабораторная работа №1
__Условие задачи:__ 
Вариант 5:Дерево отрезков. Поиск количества вхождений какого-то числа на отрезке массива. Изменение всех чисел на отрезке массива на какое-то значение

__Цель:__
Написать библиотеку и реализовать в ней дерево отрезков. 

__Задача:__
Реализовать методы поиска вхождений какого-либо числа на отрезке массива,изменения всех чисел на отрезке на какое-то значение
# Определения: 
<details>
  <summary></summary>
  
* Дерево отрезков - полное бинарное дерево, в котором каждая вершина отвечает за некоторый отрезок в массиве. Корень дерева отвечает за весь массив, его две дочерних вершины - за две половины, и так далее. У каждой вершины, отвечающей за отрезок длиной больше 1,есть две дочерних вершины, отвечающих за левую и правую половины этого отрезка. Листья дерева отрезков отвечают за отдельные элементы (отрезки длиной 1). 

  <centre> 
    
    ![segtree](https://user-images.githubusercontent.com/114861901/224555741-d35d80bb-eba3-42a2-8cf5-565bac6f4746.png)
    
  </centre>
  
  Каждый прямоугольник - вершина дерева отрезков. Если некоторая вершина отвечает за отрезок нечётной длины, то одна из её дочерних вершин будет отвечать за отрезок длиной ⌈n2⌉, а другая - за отрезок длиной ⌊n2⌋. Например, так выглядит дерево отрезков для массива из 13 элементов:

  ![segtree2](https://user-images.githubusercontent.com/114861901/224555788-c76d45aa-c891-4b7a-846e-8dce08ff66fc.png)
</details>

# Описание алгоритма
<details>
  <summary></summary>
Для реализации поставленной задачи мной был создан заголовочный файл Header.h,в котором описан класс SegmentTree.Объект данного класса характеризуется двумя полями:исходный массив,который пользователь задает самостоятельно,и массив дерева отрезков,элементы которого представляют собой по определению суммы элементов отрезков исходного массива.Массив дерева отрезков формируется автоматически при вызове какой-либо функции для объекта класса.Класс содержит поле структуры отрезка,с которым пользователь собирается работать и также самостоятельно задает.Для объектов класса в нем реализованы две функции согласно заданию:изменение элементов отрезка и подсчет значения на отрезке массива.
В качестве параметров в функции передаются структуры нужных отрезков и значение,которое нужно посчитать/на которое нужно изменить отрезок.
Введем некоторые понятия:дерево отрезков состоит из "корня", "ветвей", "листьев".
Корень дерева представляет собой сумму всех элементов изначального массива,ветви - суммы элементов принадлежищих отдельным отрезкам,листья - отдельные элементы массива
Заполнение дерева происходит от "листьев" к "корням".Таким образом для построения дерева мы расставляем по местам сначала отдельные числа,потом попарно находим их суммы и присваиваем предыдущим элементам нового массива,находим суммы сумм и тд,пока не находим сумму всех элементов,которая будет являться первым элементом массива дерева отрезков.
Чтобы изменить элементы на каком-либо отрезке массива,мы меняем сначала "листья" на нужное значение,а потом пересчитываем суммы элементов различных отрезков в соответствии с изменениям и получаем новое дерево.
Чтобы посчитать количество какого-либо элемента на отрезке,мы считаем количество "листьев" на заданном отрезке с таким же значением.

  
</details> 

# Тесты
<details>
  <summary></summary>
  Тестируем изменение элементов отрезка
  Тест 1:строим дерево на основе массива с элементами 1,2,3,4,5,6,7 и изменяем элементы на отрезке [3;6] на 0
  
  Для наглядности используем графический пример.Красными цифрами помечены,каким по счету является элемент в массиве,хранящем дерево
  
  ![image](https://user-images.githubusercontent.com/114861901/224557859-36545f7d-75f2-4013-9aea-ce4ae40e55ce.png)
  
  ![image](https://user-images.githubusercontent.com/114861901/224557881-4711a9ae-a0c2-42c5-a738-461f568088b5.png)
  
  Код и результат его выполнения:
  
  ![image](https://user-images.githubusercontent.com/114861901/226138232-e05f817a-2256-4419-82dd-46597339ee12.png)

  ![image](https://user-images.githubusercontent.com/114861901/226138314-5d9a1357-1183-4964-be4c-470dcbdbae86.png)

  Тест 2:строим дерево на основе массива с элементами 1,2,3,4,5,6,7,8,9 и изменяем элементы на отрезке [5;8] на 1
  
  Для наглядности используем графический пример.Красными цифрами помечены,каким по счету является элемент в массиве,хранящем дерево
  
 ![image](https://user-images.githubusercontent.com/114861901/224558105-b4adad4e-b9a6-4ec9-ab15-4f047c2603a4.png)

 ![image](https://user-images.githubusercontent.com/114861901/224558123-f70d529b-f4a1-4174-8ff8-4cb310e4f931.png)
  
  Код и результат его выполнения:
  
  ![image](https://user-images.githubusercontent.com/114861901/226138407-fda5297d-e8e8-4669-9599-34610f86e91c.png)
  
  ![image](https://user-images.githubusercontent.com/114861901/226138459-5b62eede-1058-4570-b752-7c41ff86c754.png)

  Тест 3:строим дерево на основе массива с элементами 1,2,3,4 и изменяем элементы на отрезке [1;2] на 10
  
  Для наглядности используем графический пример.Красными цифрами помечены,каким по счету является элемент в массиве,хранящем дерево
  
  ![image](https://user-images.githubusercontent.com/114861901/224558254-61e0891c-59e2-43df-8fc0-933318af152c.png)

  ![image](https://user-images.githubusercontent.com/114861901/224558269-4fbfd71f-2e5b-4ead-b1d7-355ea68ebd4f.png)
  
   Код и результат его выполнения:
  
  ![image](https://user-images.githubusercontent.com/114861901/226138503-65814393-96e9-4865-8ae2-0bac687baa93.png)

  ![image](https://user-images.githubusercontent.com/114861901/226138513-b3350c7b-63bb-4206-bba3-9461c6760a69.png)

  
Тестируем подсчет значения на отрезке
  
  Тест 1:строим дерево на основе массива с элементами 1,8,3,3,3,4,3,5 и подсчитываем элемент со значеним 3 на отрезке [3;7]
  
   Код и результат его выполнения:
  
  ![image](https://user-images.githubusercontent.com/114861901/226138525-81413521-73ca-4dc0-a16c-15988849bc10.png)

  ![image](https://user-images.githubusercontent.com/114861901/226138520-6deb6207-b54b-4eb4-97de-9f0029e81bca.png)
  
  Тест 2:строим дерево на основе массива с элементами 0,0,1,0 и подсчитываем элемент со значением 0 на отрезке [2;4]
  
   Код и результат его выполнения:
  
  ![image](https://user-images.githubusercontent.com/114861901/226138544-f8d761f0-120f-4fb8-960e-614151d937aa.png)

  ![image](https://user-images.githubusercontent.com/114861901/226138546-b2c14106-7df6-4102-8f51-63e84687ea08.png)

   Тест 3:строим дерево на основе массива с элементами  8,3,3,6,9 и подсчитываем элемент со значением 9 на отрезке [1;4]
  
   Код и результат его выполнения:
  
  ![image](https://user-images.githubusercontent.com/114861901/226138574-9deeb08b-a5c8-40c0-bb0e-f5cb89a7d641.png)

  ![image](https://user-images.githubusercontent.com/114861901/226138563-0cf841a2-8bc9-41dd-a73e-ba24834c6c27.png)

</details> 

# Вывод
<details>
  <summary></summary>
 Лабораторная работа познакомила меня с понятием дерево отрезков.
 В ходе выполнения задания я начился реализовывать дерево отрезков 
 на основе какого-либо массива,а также выполнять различные операции 
 над отрезками массива,используя дерево отрезков,например,изменять 
 элементы отрезка на другое значение,подсчитывать количество элементов 
 с определенным значением на отрезке.
 Также я узнал,что такое статическая библиотека,как ее создавать и в дальнейшем использовать
</details> 

# Источники
<details>
  <summary></summary>

https://brestprog.by/topics/segmenttree/
https://ru.wikipedia.org/wiki/%D0%94%D0%B5%D1%80%D0%B5%D0%B2%D0%BE_%D0%BE%D1%82%D1%80%D0%B5%D0%B7%D0%BA%D0%BE%D0%B2
https://habr.com/ru/company/otus/blog/485194/
https://e-maxx.ru/algo/segment_tree
  
</details> 
